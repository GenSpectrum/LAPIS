---
import {Code} from '@astrojs/starlight/components';
import {getLapisUrl} from '../lapisUrl';

const lapisUrl = getLapisUrl();
---

<p>
    Some LAPIS instances require authentication to access their data.
    If an instance is configured with authentication, you need to include a valid access token in your requests.
</p>
<h2>Checking if Authentication is Required</h2>
<p>
    Try accessing any endpoint without authentication:

    ```bash
    curl https://lapis.example.com/sample/info -v
    ```

    If authentication is required, you'll receive a `401 Unauthorized` response and the output will contains something
    like
    <Code code='> ...
< HTTP/1.1 401
< ...'/>

    If the instance is open (no authentication), you'll receive the normal response data.
</p>

<h2>Getting an Access Token</h2>

<p>
    Contact the LAPIS instance administrator to learn how to obtain an access token.
    The method depends on the identity provider configured for that instance.

    Common methods include:
    - **Username/password** - Exchange credentials for a token
    - **Client credentials** - Use a client ID and secret
    - **OAuth 2.0 flows** - Authorization code, device flow, etc.
</p>

<h2>Making Authenticated Requests</h2>

<p>
    To make authenticated requests to LAPIS, include the access token in the <Code code="`Authorization`"/> header using
    the <Code code="`Bearer`"/> scheme:

    <Code
            code='```bash
curl -H "Authorization: Bearer YOUR_ACCESS_TOKEN" https://lapis.example.com/sample/aggregated
```'/>
</p>
