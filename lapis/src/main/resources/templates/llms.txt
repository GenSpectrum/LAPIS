# LAPIS - [(${instanceName})]

> LAPIS (Lightweight API for Sequences) instance for [(${instanceName})].
> Query genomic sequence data with powerful mutation filters, metadata combinations, and Boolean logic.

This instance contains data for [(${instanceName})] with [(${metadataCount})] metadata fields and [(${geneCount})] genes[# th:if="${segmentCount > 1}"] across [(${segmentCount})] segments[/].

The LAPIS code is open source and available at https://github.com/GenSpectrum/LAPIS.
LAPIS is a convenience API around SILO, a high-performance query engine for genomic sequences.
The code is available at https://github.com/GenSpectrum/LAPIS-SILO.



## Instance Configuration

### Metadata Fields

The following metadata fields are available for filtering on this instance:

[# th:each="field : ${metadataFields}"]
- **[(${field.name})]** ([(${field.type})])
[/]

### How to Filter by Metadata Fields

You can use metadata fields as filter parameters in your queries. The filter syntax depends on the field type:

[# th:each="example : ${filterExamples}"]
- [(${example})]
[/]

You can combine multiple filters in a single query. All filters are combined with AND logic.
All exact filters also support filtering for `null`.

### Genes and Segments

[# th:if="${segmentCount > 1}"]
This instance uses a multi-segmented genome with [(${segmentCount})] segments:

Segments: [(${segmentNames})]

[/]
Available genes for amino acid queries:

Genes: [(${geneNames})]

## API Endpoints

The OpenAPI spec is available at [(${apiDocsLink})].
Refer to that if you need more details on an endpoint.

### Data Retrieval and Mutation Analysis

These are the primary entrypoints for analyzing the data in this LAPIS instance.

These endpoints are available as GET or POST.
Prefer POST since it allows more flexible requests.
Use GET when you want to have links that are easy to share since all their parameters can be passed as query parameters.

Every endpoint accepts filters on metadata fields and mutations.
Use these to narrow down the sequences that are included in the results.

[# th:each="endpoint : ${dataRetrievalEndpoints}"]
- [(${endpoint.link})]: [(${endpoint.description})]
[# th:if="${endpoint.details != null}"]
  [(${endpoint.details})]
[/]
[/]

### Time Series

These endpoints are mainly built for specialized display components that show time series data in a tabular form.
Useful for tracking trends over time.
These endpoints only accept POST.

[# th:each="endpoint : ${timeSeriesEndpoints}"]
- [(${endpoint.link})]: [(${endpoint.description})]
[# th:if="${endpoint.details != null}"]
  [(${endpoint.details})]
[/]
[/]
[# th:if="${hasPhyloTreeField}"]

### Phylogenetic Analysis

[# th:each="endpoint : ${phyloEndpoints}"]
- [(${endpoint.link})]: [(${endpoint.description})]
[# th:if="${endpoint.details != null}"]
  [(${endpoint.details})]
[/]
[/]
[/]

### Info

[# th:each="endpoint : ${infoEndpoints}"]
- [(${endpoint.link})]: [(${endpoint.description})]
[# th:if="${endpoint.details != null}"]
  [(${endpoint.details})]
[/]
[/]

## Query Examples

These examples demonstrate common query patterns using POST requests with JSON payloads.
All sample endpoints also support GET requests with query parameters.

[# th:each="example : ${queryExamples}"]
### [(${example.title})]

POST [(${example.endpoint})]
Content-Type: application/json

[(${example.body})]

[(${example.description})]

[/]

## Core Concepts

Understanding these concepts will help you construct effective queries:

[# th:each="concept : ${coreConcepts}"]
- [(${concept.link})]: [(${concept.description})]
[/]

## Optional

Additional resources for advanced use cases:

[# th:each="resource : ${optionalResources}"]
- [(${resource.link})]: [(${resource.description})]
[/]
