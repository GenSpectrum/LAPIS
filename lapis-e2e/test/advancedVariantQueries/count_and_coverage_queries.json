{
  "testCaseName": "Count and coverage queries",
  "description": "Tests that validate 'q or not maybe(q) as a coverage query",
  "requests": [
    {
      "requestName": "count query: Either position has T mutation",
      "lapisRequest": {
        "advancedQuery": "C2453T | C913T"
      },
      "expected": [{ "count": 50 }]
    },
    {
      "requestName": "Explicitly query for non-T coverage at positions",
      "lapisRequest": {
        "advancedQuery": "!C2453N & !C2453T & !C913N & !C913T"
      },
      "expected": [{ "count": 45 }]
    },
    {
      "requestName": "Not maybe either position has T (excludes T and N at both positions)",
      "description": "The same query as the previous one, but expressed as 'not maybe(q)'",
      "lapisRequest": {
        "advancedQuery": "!maybe(C2453T | C913T)"
      },
      "expected": [{ "count": 45 }]
    },
    {
      "requestName": "q | !maybe(q) - coverage of all positions (2453, 913)",
      "lapisRequest": {
        "advancedQuery": "(C2453T | C913T) | !maybe(C2453T | C913T)"
      },
      "expected": [{ "count": 95 }]
    },
    {
      "requestName": "Exclude N at both positions (naive coverage query)",
      "description": "This appears to be a coverage query (no ambiguous N), but returns 92 instead of sequences with full coverage. It includes cases where one position may have a T mutation while we lack information about the other position.",
      "lapisRequest": {
        "advancedQuery": "!C2453N & !C913N"
      },
      "expected": [{ "count": 92 }]
    },
    {
      "requestName": "First position N, second position T",
      "lapisRequest": {
        "advancedQuery": "C2453N & C913T"
      },
      "expected": [{ "count": 3 }]
    }
  ]
}
